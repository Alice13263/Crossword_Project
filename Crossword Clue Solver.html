<!DOCTYPE html>
<html lang="en-GB">
    <head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	    <title>Clue Solver  - Crossword Generator & Solver</title>
        <link rel = "stylesheet" href = "CSS_stylesheet.css">
    </head>
    <body>
       <div class = "wrapper">
            <a class = "top"></a>
            <header class = "crossword_header">
                <div class = "back_button_div">
                    <a href = "Main Menu Page.html">
                        <button type = "button" class = "back_button elements_overlay"></button>
                    </a>
                </div>
                <div class = "accessibility_menu_button_div">
                    <!-- Add the function to the accesibility menu button when the page has been created -->
                    <button type = "button" class = "accessibility_menu_button elements_overlay"></button>
                </div>
            </header>
            <main>
                <div class = "page_title_container">
                    <h1 class = "text page_title">Crossword Clue Solver</h1>
                </div>
                <div class = "enter_info_container">
                    <div class = "enter_div">
                        <div class = "info_enter_area clue_area">
                            <p class = "text" style = "font-weight: bold;">Enter the Clue:</p>
                            <input type = "text" class = "text input_field" id = "clue_input" placeholder = "Minimum 3 Characters" required = "required">
                        </div>
                    </div>
                    <div class = "enter_div">
                        <div class = "info_enter_area clue_area">
                            <p class = "text" style = "font-weight: bold;">Number of Letters:</p>
                            <input type = "number" class = "text input_field" id = "letter_number_input" placeholder= "1 to 20 Letters" required = "required" min = "1" max = "20">
                        </div>
                    </div>
                    <div class = "enter_div">
                        <div class = "info_enter_area clue_area">
                            <p class = "text" style = "font-weight: bold;">Letters Given:</p>
                            <input type = "text" class = "text input_field" id = "clue_letters_input" placeholder= "E.g. a_p_e" required = "required">
                        </div>
                    </div>
                </div>
                <div class = "enter_div">
                        <p class= "text" id = "error_clue" style = "color: rgb(240,36,29);"></p>
                </div>
                <div class = "submit_button_div">
                    <button type = "button" class = "submit_button text elements_overlay" onclick = "validClue()">SOLVE</button>
                </div>
                <div class = "answers_container">
                    <div class = "answers_column">
                        <h3 class = "text page_subtitle" style = "font-weight: bold;">Answers</h3>
                        <p class = "text" id = "answer1"></p>
                        <p class = "text" id = "answer2"></p>
                        <p class = "text" id = "answer3"></p>
                        <p class = "text" id = "answer4"></p>
                        <p class = "text" id = "answer5"></p>
                        <p class = "text" id = "answer6"></p>
                        <p class = "text" id = "answer7"></p>
                        <p class = "text" id = "answer8"></p>
                        <p class = "text" id = "answer9"></p>
                        <p class = "text" id = "answer10"></p>
                    </div>
                    <div class = "answers_column">
                        <h3 class = "text page_subtitle" style = "font-weight: bold;">% Certainty</h3>
                        <p class = "text" id = "perc1"></p>
                        <p class = "text" id = "perc2"></p>
                        <p class = "text" id = "perc3"></p>
                        <p class = "text" id = "perc4"></p>
                        <p class = "text" id = "perc5"></p>
                        <p class = "text" id = "perc6"></p>
                        <p class = "text" id = "perc7"></p>
                        <p class = "text" id = "perc8"></p>
                        <p class = "text" id = "perc9"></p>
                        <p class = "text" id = "perc10"></p>
                    </div>
                </div>
            </main>
        </div>
        <script>
            const username = localStorage.getItem("username");
            if (!username){
                window.location.href = "http://127.0.0.1:5500/Login%20Page.html"
            };
            const clue_error = document.getElementById("error_clue");
            const valid_letters_given = /^[A-Za-z_]+$/;
            const no_letters_input = document.querySelector("#letter_number_input");
            const valid_numbers = /^[0-9]*$/;
            no_letters_input.addEventListener("keypress", event => {
                if (!valid_numbers.test(event.key)) {
                    event.preventDefault();
                }
            });
            function validateClue(clue){
                var entered_clue = document.getElementById(clue).value.trim();
                if ((entered_clue.length < 3)||(entered_clue.length > 50)){
                    clue_error.innerText = "Clue must be at least 3 characters, and no more than 50"
                }
                else{
                    return true
                }
            };
            function validateLetters(no_letters,letters_given){
                var entered_letters = document.getElementById(letters_given).value.trim();
                var entered_number = document.getElementById(no_letters).value;
                entered_number = entered_number.replace(/^0+(?=\d)/,'');
                if ((entered_number < 1)||(entered_number > 20)){
                    clue_error.innerText = "Number of letters must be between 1 and 20"
                }
                else if (entered_letters.length != entered_number){
                    clue_error.innerText = "Length of given letters must match the total number of letters"
                }
                else if (valid_letters_given.test(entered_letters) == false){
                    clue_error.innerText = "Letters in answer should only contain letters or underscores"
                }
                else{
                    return true
                }
            };
            function validClue(){
                if ((validateClue("clue_input") == true) && (validateLetters("letter_number_input","clue_letters_input") == true)){
                    clue_error.innerText = "";
                    location.reload();
                }
            }
        </script>
    </body>
</html>     