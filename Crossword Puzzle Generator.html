<!DOCTYPE html>
<html lang="en-GB">
    <head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	    <title>Puzzle Generator  - Crossword Generator & Solver</title>
        <link rel = "stylesheet" href = "CSS_stylesheet.css">
    </head>
    <body>
       <div class = "wrapper">
            <a class = "top"></a>
            <header class = "crossword_header">
                <div class = "back_button_div">
                    <a href = "Main Menu Page.html">
                        <button type = "button" class = "back_button elements_overlay"></button>
                    </a>
                </div>
                <div class = "accessibility_menu_button_div">
                    <!-- Add the function to the accesibility menu button when the page has been created -->
                    <button type = "button" class = "accessibility_menu_button elements_overlay"></button>
                </div>
            </header>
            <main>
                <div class = "page_title_container">
                    <h1 class = "text page_title">Crossword Puzzle Generator</h1>
                    <a class = "text page_subtitle" style = "color: rgb(48, 120, 209);" href = "">Continue Your Last Puzzle</a>
                </div>
                <div class = "enter_info_container">
                    <div class = "enter_div">
                        <div class = "info_enter_area clue_area">
                            <p class = "text" style = "font-weight: bold;">Choose a theme:</p>
                            <input type = "text" class = "text input_field" id = "theme_input" placeholder = "Minimum 3 Characters" required = "required">
                        </div>
                        <p class = "text" style = "font-weight: bold;">If you don't want a theme, choose 'General Knowledge'</p>
                    </div>
                    <div class = "enter_div">
                        <div class = "info_enter_area clue_area">
                            <p class = "text" style = "font-weight: bold;">Number of Clues:</p>
                            <input type = "number" class = "text input_field" id = "clue_number_input" placeholder= "3 to 50 Clues" required = "required" min = "1" max = "50">
                        </div>
                    </div>
                </div>
                <div class = "enter_div">
                    <p class= "text" id = "error_theme" style = "color: rgb(240,36,29);"></p>
                </div>
                <div class = "submit_button_div">
                    <button type = "button" class = "generate_button text elements_overlay" onclick = "validGenerate()">GENERATE</button>
                </div>
            </main>
        </div>
        <script>
            const username = localStorage.getItem("username");
            if (!username){
                window.location.href = "http://127.0.0.1:5500/Login%20Page.html"
            };
            const theme_error = document.getElementById("error_theme");
            const no_clues_input = document.querySelector("#clue_number_input");
            const valid_numbers = /^[0-9]*$/;
            no_clues_input.addEventListener("keypress", event => {
                if (!valid_numbers.test(event.key)) {
                    event.preventDefault();
                }
            });
            function validTheme(theme){
                var entered_theme = document.getElementById(theme).value.trim();
                if ((entered_theme.length < 3)||(entered_theme.length > 50)){
                    theme_error.innerText = "Theme must be at least 3 characters, and no more than 50"
                }
                else{
                    return true
                }
            };
            function validateNumberClues(clues){
                var num_clues = document.getElementById(clues).value;
                num_clues = num_clues.replace(/^0+(?=\d)/,'');
                if ((num_clues < 3)||(num_clues > 50)){
                    theme_error.innerText = "Number of clues must be between 3 and 50"
                }
                else{
                    return true
                }
            };
            function validGenerate(){
                if ((validTheme("theme_input") == true) && (validateNumberClues("clue_number_input") == true)){
                    theme_error.innerText = "";
                    location.reload()
                }
            }
        </script>
    </body>
</html>